<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>钉钉/微信消息告警 | mBox集成商工具箱</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="钉钉/微信消息告警" />
<meta name="author" content="马鹏飞" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="作者:马鹏飞 邮箱:mapengfei4125@163.com 微信:ttsysprep" />
<meta property="og:description" content="作者:马鹏飞 邮箱:mapengfei4125@163.com 微信:ttsysprep" />
<link rel="canonical" href="http://0.0.0.0:4000/Zabbix/Python%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/" />
<meta property="og:url" content="http://0.0.0.0:4000/Zabbix/Python%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/" />
<meta property="og:site_name" content="mBox集成商工具箱" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-10T03:00:00+00:00" />
<script type="application/ld+json">
{"@type":"Article","url":"http://0.0.0.0:4000/Zabbix/Python%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/siteicon.png"},"name":"马鹏飞"},"author":{"@type":"Person","name":"马鹏飞"},"headline":"钉钉/微信消息告警","dateModified":"2020-10-10T03:00:00+00:00","datePublished":"2020-10-10T03:00:00+00:00","description":"作者:马鹏飞 邮箱:mapengfei4125@163.com 微信:ttsysprep","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

		<link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="mBox集成商工具箱" />

		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic|Open+Sans:400,400italic,600,600italic,700,700italic|Inconsolata:400,700">
		<link rel="stylesheet" href="/css/main.css">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="/touch-icon.png" sizes="192x192">
		<link rel="icon" type="image/png" href="/images/favicon.png">
		<script>
			var _hmt = _hmt || [];
			(function() {
			  var hm = document.createElement("script");
			  hm.src = "https://hm.baidu.com/hm.js?f556111e6dcbc68ea7a284194067ca08";
			  var s = document.getElementsByTagName("script")[0]; 
			  s.parentNode.insertBefore(hm, s);
			})();
		</script>			
	</head>

	<body>
		<header>
			<h1>
				<a href="/"><img src="/images/emblem.svg" width="40" height="40" alt="mBox集成商工具箱 logo"></a>
				mBox集成商工具箱
				<button type="button" class="open-nav" id="open-nav"></button>
			</h1>

			<form action="/search/" method="get">
				<input type="text" name="q" id="search-input" placeholder="Search" autofocus>
				<input type="submit" value="Search" style="display: none;">
			</form>

			<nav class="full-navigation">
				<ul>
					<li class="nav-item top-level ">
						
						<a href="/">mBox工具箱概述</a>
					</li>
				</ul>

				<ul>
					
					
						<li class="nav-item top-level ">
							
							<a href="/Linux/vim%E5%85%A8%E5%B1%80%E6%9B%BF%E6%8D%A2%E5%91%BD%E4%BB%A4/">Linux</a>
							<ul>
								
									<li class="nav-item "><a href="/Linux/vim%E5%85%A8%E5%B1%80%E6%9B%BF%E6%8D%A2%E5%91%BD%E4%BB%A4/">vim全局替换命令</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level current">
							
							<a href="/Zabbix/Python%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/">监控告警</a>
							<ul>
								
									<li class="nav-item current"><a href="/Zabbix/Python%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/">钉钉/微信消息告警</a></li>
								
							</ul>
						</li>
					
				</ul>

				<ul>
					<li class="nav-item top-level ">
						
						<a href="/changelog/"></a>
					</li>
				</ul>
			</nav>
		</header>

		<section class="main">
			<div class="page-header">
				<h2>监控告警</h2>
				<h3>钉钉/微信消息告警</h3>
			</div>
			<article class="content">
				<blockquote>
  <p>作者:马鹏飞         邮箱:mapengfei4125@163.com         微信:ttsysprep</p>
</blockquote>

<h3 id="钉钉告警">钉钉告警</h3>

<ol>
  <li>
    <p>自动生成配置文件，第一次运行会在程序所在目录生成以程序名命名的配置文件</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 dingding.py 
</code></pre></div>    </div>
  </li>
  <li>
    <p>修改配置文件内容</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Webhook]
<span class="c">#将此URL修改为钉钉自定义机器人接口URL</span>
url <span class="o">=</span> https://oapi.dingtalk.com/robot/send?access_token<span class="o">=</span>390e9376820B5559b32bc0f49494193223660222d8ab4d1092b620a5beaeac86
   
<span class="o">[</span>ProxyServer]
<span class="c">#Socket5代理服务器默认禁用，如需启用修改为“state = on”</span>
state <span class="o">=</span> off
<span class="c">#代理服务器IP，默认支持两台Socket5代理服务器同时提供服务，当servera无法使用时自动切换到serverb发送消息</span>
servera <span class="o">=</span> xxx.xxx.xxx.xxx
serverb <span class="o">=</span> xxx.xxx.xxx.xxx
port <span class="o">=</span> 1080
   
<span class="o">[</span>Log]
<span class="c">#日志文件位置，默认存在程序相同目录下</span>
logdir <span class="o">=</span> /Users/mapengfei/Documents/DingDing
level <span class="o">=</span> INFO
   
<span class="o">[</span>license]
<span class="c">#License高级功能，需购买License</span>
cdkey <span class="o">=</span> none
   
   
</code></pre></div>    </div>
  </li>
  <li>
    <p>参数用空格隔开，发送告警消息到钉钉</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 dingding.py 发送消息的标题  发送消息的内容
</code></pre></div>    </div>

    <p><img src="/images/zabbix/images/example1.jpeg" style="zoom:50%;" /></p>
  </li>
</ol>

<h3 id="微信告警">微信告警</h3>

<p>开发中，敬请期待……</p>

<h3 id="高级功能">高级功能</h3>

<p>开发中，敬请期待……</p>


			</article>
		</section>

		<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
		</script>
	</body>
</html>
